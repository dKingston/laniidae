<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>SCons tool &#8220;qt4&#8221; - Reference</title><link rel="stylesheet" href="scons.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article" title="SCons tool &#8220;qt4&#8221; - Reference"><div class="titlepage"><div><div><h2 class="title"><a name="id361614"></a>SCons tool <span class="quote">&#8220;<span class="quote">qt4</span>&#8221;</span> - Reference</h2></div><div><div class="author"><h3 class="author"><span class="surname">Philippe Vaucher</span></h3></div></div><div><div class="author"><h3 class="author"><span class="firstname">Dirk</span> <span class="surname">Baechle</span></h3></div></div><div><p class="pubdate">2010-07-13</p></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#id360927">1. What it does</a></span></dt><dd><dl><dt><span class="section"><a href="#id360944">1.1. Automatic moc file generation from header files</a></span></dt><dt><span class="section"><a href="#id361543">1.2. Automatic moc file generation from cxx files</a></span></dt><dt><span class="section"><a href="#id361588">1.3. Handling of .ui files</a></span></dt><dt><span class="section"><a href="#id380218">1.4. Handling translation files (.ts and .qm)</a></span></dt><dt><span class="section"><a href="#id380231">1.5. Compiling resource files (.qrc)</a></span></dt></dl></dd><dt><span class="section"><a href="#id380246">2. Builders</a></span></dt><dd><dl><dt><span class="section"><a href="#id380254">2.1. Moc4</a></span></dt><dt><span class="section"><a href="#id380275">2.2. XMoc4</a></span></dt><dt><span class="section"><a href="#id380298">2.3. ExplicitMoc4</a></span></dt><dt><span class="section"><a href="#id380327">2.4. Uic4</a></span></dt><dt><span class="section"><a href="#id361116">2.5. ExplicitUic4</a></span></dt><dt><span class="section"><a href="#id361145">2.6. Qrc4</a></span></dt><dt><span class="section"><a href="#id361171">2.7. Ts4</a></span></dt><dt><span class="section"><a href="#id361199">2.8. Qm4</a></span></dt></dl></dd><dt><span class="section"><a href="#id361232">3. Variables</a></span></dt></dl></div><div class="abstract" title="Abstract"><p class="title"><b>Abstract</b></p><p>This reference lists all the variables that are used within the
    <span class="quote">&#8220;<span class="quote">qt4</span>&#8221;</span> tool, and the available builders. It is intended for
    SCons tool developers and core programmers, as a normal user you should
    read the manual instead.</p></div><div class="section" title="1. What it does"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id360927"></a>1. What it does</h2></div></div></div><p>The <span class="quote">&#8220;<span class="quote">qt4</span>&#8221;</span> tool sets construction variables and
    registers builders for creating applications and libraries that use the
    Qt4 framework by Trolltech/Nokia.</p><p>It supports the following operations:</p><div class="section" title="1.1. Automatic moc file generation from header files"><div class="titlepage"><div><div><h3 class="title"><a name="id360944"></a>1.1. Automatic moc file generation from header files</h3></div></div></div><p>You do not have to specify moc files explicitly, the tool does it
      for you. However, there are a few preconditions to do so: Your header
      file must have the same filebase as your implementation file. It must
      have one of the suffixes <code class="literal">.h</code>, <code class="literal">.hpp</code>,
      <code class="literal">.H</code>, <code class="literal">.hxx</code>, <code class="literal">.hh</code>.
      You can turn off automatic moc file generation by setting
      <code class="literal">QT4_AUTOSCAN</code> to 0. See also the corresponding builder
      method <code class="literal">Moc4()</code>.</p></div><div class="section" title="1.2. Automatic moc file generation from cxx files"><div class="titlepage"><div><div><h3 class="title"><a name="id361543"></a>1.2. Automatic moc file generation from cxx files</h3></div></div></div><p>As stated in the Qt documentation, include the moc file at the end
      of the cxx file. Note that you have to include the file, which is
      generated by the transformation</p><pre class="screen">${QT4_MOCCXXPREFIX}&lt;basename&gt;${QT4_MOCCXXSUFFIX}</pre><p>,
      by default <code class="literal">&lt;basename&gt;.moc</code>. A warning is
      generated after building the moc file, if you do not include the correct
      file. If you are using VariantDir, you may need to specify
      <code class="literal">duplicate=1</code>. You can turn off automatic moc file
      generation by setting <code class="literal">QT4_AUTOSCAN</code> to 0. See also the
      corresponding <code class="literal">Moc4</code> builder method.</p></div><div class="section" title="1.3. Handling of .ui files"><div class="titlepage"><div><div><h3 class="title"><a name="id361588"></a>1.3. Handling of .ui files</h3></div></div></div><p>TODO: describe in a little more detail.</p><p>See also the corresponding <code class="literal">Uic4</code> builder
      method.</p></div><div class="section" title="1.4. Handling translation files (.ts and .qm)"><div class="titlepage"><div><div><h3 class="title"><a name="id380218"></a>1.4. Handling translation files (.ts and .qm)</h3></div></div></div><p>TODO: describe in a little more detail.</p><p>See also the corresponding builder methods Ts4 and Qm4.</p></div><div class="section" title="1.5. Compiling resource files (.qrc)"><div class="titlepage"><div><div><h3 class="title"><a name="id380231"></a>1.5. Compiling resource files (.qrc)</h3></div></div></div><p>TODO: describe in a little more detail.</p><p>See also the corresponding Qrc4 builder method.</p></div></div><div class="section" title="2. Builders"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id380246"></a>2. Builders</h2></div></div></div><p></p><div class="section" title="2.1. Moc4"><div class="titlepage"><div><div><h3 class="title"><a name="id380254"></a>2.1. Moc4</h3></div></div></div><p>Builds an output file from a moc input file. Moc input files are
      either header files or cxx files. This builder is only available after
      using the tool 'qt4'.</p><p>Example:</p><pre class="screen">env.Moc4('foo.h') # generates moc_foo.cc
env.Moc4('foo.cpp') # generates foo.moc
</pre></div><div class="section" title="2.2. XMoc4"><div class="titlepage"><div><div><h3 class="title"><a name="id380275"></a>2.2. XMoc4</h3></div></div></div><p>Just like the Moc4 builder, it builds an output file from a moc
      input file. Moc input files are either header files or cxx files. This
      builder is only available after using the tool 'qt4'. It is defined
      separately for the include driven Automoc strategy (#1) and can be
      controlled via the QT4_XMOC* variables.</p><p>Example:</p><pre class="screen">env.XMoc4('foo.h') # generates moc_foo.cpp
env.XMoc4('foo.cpp') # generates foo.moc
</pre></div><div class="section" title="2.3. ExplicitMoc4"><div class="titlepage"><div><div><h3 class="title"><a name="id380298"></a>2.3. ExplicitMoc4</h3></div></div></div><p>Just like the <code class="literal">Moc4</code> builder, it builds an output
      file from a moc input file. However, it does not use any default prefix
      or suffix for the filenames. You can, and have to, specify the full
      source and target names explicitly. This builder is only available after
      using the tool 'qt4'. It can be your last resort, when you have to moc
      single files from/to exotic filenames.</p><p>Example:</p><pre class="screen">env.ExplicitMoc4('moced_foo.cxx','foo.h') # generates moced_foo.cxx
</pre></div><div class="section" title="2.4. Uic4"><div class="titlepage"><div><div><h3 class="title"><a name="id380327"></a>2.4. Uic4</h3></div></div></div><p>Builds a header file from an .ui file, where the former contains
      the setup code for a GUI class. This builder is only available after
      using the tool 'qt4'. Using this builder lets you override the standard
      naming conventions (be careful: prefixes are always prepended to names
      of built files; if you don't want prefixes, you may set them to
      ``).</p><p>Example:</p><pre class="screen">env.Uic4('foo.ui') # -&gt; 'ui_foo.h'
</pre></div><div class="section" title="2.5. ExplicitUic4"><div class="titlepage"><div><div><h3 class="title"><a name="id361116"></a>2.5. ExplicitUic4</h3></div></div></div><p>Just like the <code class="literal">Uic4</code> builder, it builds a header
      file from a .ui input file. However, it does not use any default prefix
      or suffix for the filenames. You can, and have to, specify the full
      source and target names explicitly. This builder is only available after
      using the tool 'qt4'. It can be your last resort, when you have to
      convert .ui files to exotic filenames.</p><p>Example:</p><pre class="screen">env.ExplicitUic4('uiced_foo.hpp','foo.ui') # generates uiced_foo.hpp
</pre></div><div class="section" title="2.6. Qrc4"><div class="titlepage"><div><div><h3 class="title"><a name="id361145"></a>2.6. Qrc4</h3></div></div></div><p>Builds a cxx file, containing all resources from the given
      <code class="literal">.qrc</code> file. This builder is only available after using
      the tool 'qt4'.</p><p>Example:</p><pre class="screen">env.Qrc4('foo.qrc') # -&gt; ['qrc_foo.cc']
</pre></div><div class="section" title="2.7. Ts4"><div class="titlepage"><div><div><h3 class="title"><a name="id361171"></a>2.7. Ts4</h3></div></div></div><p>Scans the source files in the given path for tr() marked strings,
      that should get translated. Writes a <code class="literal">.ts</code> file for the
      Qt Linguist. This builder is only available after using the tool
      'qt4'.</p><p>Example:</p><pre class="screen">env.Ts4('foo.ts','.') # -&gt; ['foo.ts']
</pre></div><div class="section" title="2.8. Qm4"><div class="titlepage"><div><div><h3 class="title"><a name="id361199"></a>2.8. Qm4</h3></div></div></div><p>Compiles a given <code class="literal">.ts</code> file (Qt Linguist) into a
      binary <code class="literal">.qm</code> file. This builder is only available after
      using the tool 'qt4'.</p><p>Example:</p><pre class="screen">env.Qm4('foo.ts') # -&gt; ['foo.qm']
</pre></div></div><div class="section" title="3. Variables"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id361232"></a>3. Variables</h2></div></div></div><div class="variablelist"><dl><dt><span class="term">QT4DIR</span></dt><dd><p>The Qt4 tool tries to read this from the current Environment
            and <code class="literal">os.environ</code>. If it is not set and found, the
            value of QTDIR (in Environment/<code class="literal">os.environ</code>) is
            used as a fallback. It is used to initialize all QT4_*
            construction variables listed below.</p></dd><dt><span class="term">QT4_AUTOSCAN</span></dt><dd><p>The default is '1', which means that the tool is
            automatically scanning for mocable files (see also
            <code class="literal">QT4_AUTOSCAN_STRATEGY</code>). You can set this
            variable to '0' to switch it off, and then use the
            <code class="literal">Moc4</code> Builder to explicitly specify files to run
            moc on.</p></dd><dt><span class="term">QT4_BINPATH</span></dt><dd><p>The path where the Qt4 binaries are installed. The default
            value is '<code class="literal">QT4DIR</code>/bin'.</p></dd><dt><span class="term">QT4_MOCCPPPATH</span></dt><dd><p>The path where the Qt4 header files are installed. The
            default value is '<code class="literal">QT4DIR</code>/include'. Note: If you
            set this variable to None, the tool won't change the
            <code class="literal">CPPPATH</code> construction variable.</p></dd><dt><span class="term">QT4_DEBUG</span></dt><dd><p>Prints lots of debugging information while scanning for moc
            files.</p></dd><dt><span class="term">QT4_MOC</span></dt><dd><p>The path to the Qt4 moc executable. Default value is
            '<code class="literal">QT4_BINPATH</code>/moc'.</p></dd><dt><span class="term">QT4_MOCCXXPREFIX</span></dt><dd><p>Default value is ''. Prefix for moc output files, when
            source is a cxx file and the Automoc strategy #0 (Q_OBJECT driven)
            is used.</p></dd><dt><span class="term">QT4_MOCCXXSUFFIX</span></dt><dd><p>Default value is '.moc'. Suffix for moc output files, when
            source is a cxx file and the Automoc strategy #0 (Q_OBJECT driven)
            is used.</p></dd><dt><span class="term">QT4_MOCFROMCXXFLAGS</span></dt><dd><p>Default value is '-i'. These flags are passed to moc, when
            moccing a C++ file.</p></dd><dt><span class="term">QT4_MOCFROMHFLAGS</span></dt><dd><p>Default value is ''. These flags are passed to moc, when
            moccing a header file.</p></dd><dt><span class="term">QT4_MOCHPREFIX</span></dt><dd><p>Default value is 'moc_'. Prefix for moc output files, when
            the source file is a header and the Automoc strategy #0 (Q_OBJECT
            driven) is used.</p></dd><dt><span class="term">QT4_MOCHSUFFIX</span></dt><dd><p>Default value is '<code class="literal">CXXFILESUFFIX</code>'. Suffix
            for moc output files, when the source file is a header and the
            Automoc strategy #0 (Q_OBJECT driven) is used.</p></dd><dt><span class="term">QT4_UIC</span></dt><dd><p>Default value is '<code class="literal">QT4_BINPATH</code>/uic'. The
            path to the Qt4 uic executable.</p></dd><dt><span class="term">QT4_UICCOM</span></dt><dd><p>Command to generate the required header and source files
            from .ui form files. Is compiled from <code class="literal">QT4_UIC</code>
            and <code class="literal">QT4_UICFLAGS</code>.</p></dd><dt><span class="term">QT4_UICCOMSTR</span></dt><dd><p>The string displayed when generating header and source files
            from .ui form files. If this is not set, then
            <code class="literal">QT4_UICCOM</code> (the command line) is
            displayed.</p></dd><dt><span class="term">QT4_UICFLAGS</span></dt><dd><p>Default value is ''. These flags are passed to the Qt4 uic
            executable, when creating header and source files from a .ui form
            file.</p></dd><dt><span class="term">QT4_UICDECLPREFIX</span></dt><dd><p>Default value is 'ui_'. Prefix for uic generated header
            files.</p></dd><dt><span class="term">QT4_UICDECLSUFFIX</span></dt><dd><p>Default value is '.h'. Suffix for uic generated header
            files.</p></dd><dt><span class="term">QT4_UISUFFIX</span></dt><dd><p>Default value is '.ui'. Suffix of designer input files (form
            files) in Qt4.</p></dd><dt><span class="term">QT4_AUTOSCAN_STRATEGY</span></dt><dd><p>Default value is '0'. When using the Automoc feature of the
            Qt4 tool, you can select different strategies for detecting which
            files should get moced. The simple approach ('0' as the default)
            scans header and source files for the Q_OBJECT macro, so the
            trigger 'moc or not' is Q_OBJECT driven. If it is found, the
            corresponding file gets moced with the <code class="literal">Moc4</code>
            builder. This results in the files 'moc_foo.cc' and 'foo.moc' for
            header and source file, respectively. They get added to the list
            of sources, for compiling the current library or program. In older
            Qt manuals, a different technique for mocing is recommended. A cxx
            file includes the moced output of itself or its header at the end.
            This approach is somewhat deprecated, but the 'qtsolutions' by Qt
            are still based on it, for example. You also might have to switch
            older Qt sources to a new version 4.x.y. Then you can set this
            variable to '1', for 'include driven' mocing. This means that the
            tool searches for '#include' statements in all cxx files,
            containing a file pattern 'moc_foo.cpp' and 'foo.moc' for header
            and source file, respectively. If the file 'foo.h/foo.cpp' then
            contains a Q_OBJECT macro, it gets moced but is NOT added to the
            list of sources. This is the important difference between the two
            strategies. If no matching include patterns are found for the
            current cxx file, the Q_OBJECT driven method (#0) is tried as
            fallback.</p></dd><dt><span class="term">QT4_AUTOMOC_SCANCPPPATH</span></dt><dd><p>The default is '1', meaning that the tool scans for mocable
            files not only in the current directory, but also in all CPPPATH
            folders (see also <code class="literal">QT4_AUTOMOC_CPPPATH</code>). You can
            set this variable to '0' to switch it off on rare occasions, e.g.
            when too many search folders give you a bad performance in large
            projects.</p></dd><dt><span class="term">QT4_AUTOMOC_CPPPATH</span></dt><dd><p>The list of paths to scan for mocable files (see also
            <code class="literal">QT4_AUTOMOC_SCANCPPPATH</code>), it is empty by
            default which means that the CPPPATH variable is used. You can set
            this variable to a subset of CPPPATH in order to improve
            performance, i.e. to minimize the search space.</p></dd><dt><span class="term">QT4_GOBBLECOMMENTS</span></dt><dd><p>Default value is '0' (disabled). When you set this variable
            to '1', you enable the automatic removal of C/C++ comments, while
            searching for the Q_OBJECT keyword during the Automoc process.
            This can be helpful if you have the string Q_OBJECT in one of your
            comments, but don't want this file to get moced.</p></dd><dt><span class="term">QT4_CPPDEFINES_PASSTOMOC</span></dt><dd><p>Default value is '1' (enabled). When you set this variable
            to '1', all currently set CPPDEFINES get passed to the moc
            executable. It does not matter which strategy you selected with
            <code class="literal">QT4_AUTOSCAN_STRATEGY</code> or whether you call the
            <code class="literal">Moc4</code> builder directly.</p></dd><dt><span class="term">QT4_CLEAN_TS</span></dt><dd><p>Default value is '0' (disabled). When you set this variable
            to '1', the <code class="literal">Ts4</code> builder will delete your .ts
            files on a 'scons -c'. Normally, these files for the QtLinguist
            are treated as 'precious' (they are not removed prior to a
            rebuild) and do not get cleaned.</p></dd><dt><span class="term">QT4_XMOCHPREFIX</span></dt><dd><p>Default value is 'moc_'. Like
            <code class="literal">QT4_MOCHPREFIX</code>, this is the prefix for moc
            output files, when the source file is a header and the Automoc
            strategy #1 (include driven) is used.</p></dd><dt><span class="term">QT4_XMOCHSUFFIX</span></dt><dd><p>Default value is '.cpp'. Like
            <code class="literal">QT4_MOCHSUFFIX</code>, this is the suffix for moc
            output files, when the source file is a header and the Automoc
            strategy #1 (include driven) is used.</p></dd><dt><span class="term">QT4_XMOCCXXPREFIX</span></dt><dd><p>Default value is ''. Like
            <code class="literal">QT4_MOCCXXPREFIX</code>, this is the prefix for moc
            output files, when source is a cxx file and the Automoc strategy
            #1 (include driven) is used.</p></dd><dt><span class="term">QT4_XMOCCXXSUFFIX</span></dt><dd><p>Default value is '.moc'. Like
            <code class="literal">QT4_MOCCXXSUFFIX</code>, this is the suffix for moc
            output files, when source is a cxx file and the Automoc strategy
            #1 (include driven) is used.</p></dd><dt><span class="term">QT4_RCC</span></dt><dd><p>Default value is '<code class="literal">QT4_BINPATH</code>/rcc'. The
            path to the Qt4 rcc executable (resource file compiler).</p></dd><dt><span class="term">QT4_LUPDATE</span></dt><dd><p>Default value is '<code class="literal">QT4_BINPATH</code>/lupdate'.
            The path to the Qt4 lupdate executable (updates the .ts files from
            sources).</p></dd><dt><span class="term">QT4_LRELEASE</span></dt><dd><p>Default value is '<code class="literal">QT4_BINPATH</code>/lrelease'.
            The path to the Qt4 lrelease executable (converts .ts files to
            binary .qm files).</p></dd><dt><span class="term">QT4_QRCFLAGS</span></dt><dd><p>Default value is ''. These flags are passed to the Qt4 rcc
            executable, when compiling a resource file.</p></dd><dt><span class="term">QT4_LUPDATEFLAGS</span></dt><dd><p>Default value is ''. These flags are passed to the Qt4
            lupdate executable, when updating .ts files from sources.</p></dd><dt><span class="term">QT4_LRELEASEFLAGS</span></dt><dd><p>Default value is ''. These flags are passed to the Qt4
            lrelease executable, when compiling .ts files into binary .qm
            files.</p></dd><dt><span class="term">QT4_MOCINCPREFIX</span></dt><dd><p>Default value is '-I'. The prefix for specifying include
            directories to the Qt4 moc executable.</p></dd><dt><span class="term">QT4_QRCSUFFIX</span></dt><dd><p>Default value is '.qrc'. Suffix of Qt4 resource
            files.</p></dd><dt><span class="term">QT4_QRCCXXSUFFIX</span></dt><dd><p>Default value is '$CXXFILESUFFIX'. This is the suffix for
            compiled .qrc resource files.</p></dd><dt><span class="term">QT4_QRCCXXPREFIX</span></dt><dd><p>Default value is 'qrc_'. This is the prefix for compiled
            .qrc resource files.</p></dd><dt><span class="term">QT4_MOCINCFLAGS</span></dt><dd><p>List of include paths for the Qt4 moc executable, is
            compiled from <code class="literal">QT4_MOCINCPREFIX</code>,
            <code class="literal">QT4_MOCCPPPATH</code> and
            <code class="literal">INCSUFFIX</code>.</p></dd><dt><span class="term">QT4_MOCDEFINES</span></dt><dd><p>List of CPP defines that are passed to the Qt4 moc
            executable, is compiled from <code class="literal">QT4_MOCDEFPREFIX</code>,
            <code class="literal">CPPDEFINES</code> and
            <code class="literal">QT4_MOCDEFSUFFIX</code>.</p></dd><dt><span class="term">QT4_LUPDATECOM</span></dt><dd><p>Command to update .ts files for translation from the
            sources.</p></dd><dt><span class="term">QT4_LUPDATECOMSTR</span></dt><dd><p>The string displayed when updating .ts files from the
            sources. If this is not set, then
            <code class="literal">QT4_LUPDATECOM</code> (the command line) is
            displayed.</p></dd><dt><span class="term">QT4_LRELEASECOM</span></dt><dd><p>Command to convert .ts files to binary .qm files.</p></dd><dt><span class="term">QT4_LRELEASECOMSTR</span></dt><dd><p>The string displayed when converting .ts files to binary .qm
            files. If this is not set, then <code class="literal">QT4_RCC</code> (the
            command line) is displayed.</p></dd></dl></div></div></div></body></html>
